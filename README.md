# 四则运算题目生成与批改系统

## 项目简介

这是一个基于C++开发的四则运算题目自动生成与批改系统。系统能够随机生成符合小学数学要求的四则运算题目（支持分数运算），并具备题目查重、答案批改等功能。项目采用模块化设计，包含表达式树、分数计算、文件处理等多个核心模块。

## 项目特点

- 🧮 支持整数和分数的四则运算
- 🌳 基于表达式树的表达式表示和计算
- 🔄 自动查重，避免生成重复题目
- 📊 支持题目生成和答案批改两种模式
- 📁 完整的文件输入输出功能
- ✅ 严格的题目有效性验证

## 项目结构

```
项目根目录/
├── Fraction.h              # 分数类定义
├── Expression.h            # 表达式类和表达式树节点定义
├── ExpressionGenerator.h   # 表达式生成器
├── DuplicateChecker.h      # 重复题目检测器
├── FileProcessor.h         # 文件处理器
├── CommandLineParser.h     # 命令行参数解析器
├── main.cpp               # 主程序入口
└── README.md              # 项目说明文档
```

## 核心模块说明

### 1. Fraction类（分数处理）

- 实现分数的四则运算和化简
- 支持带分数、真分数、整数的相互转换
- 提供字符串与分数对象的相互转换

### 2. Expression类（表达式处理）

- 基于二叉树结构表示数学表达式
- 实现表达式的计算和字符串化
- 包含题目有效性验证（数值范围、减法非负、除法真分数等）

### 3. ExpressionGenerator类（题目生成）

- 随机生成符合要求的四则运算题目
- 控制题目难度和运算符数量
- 支持整数和分数的混合运算

### 4. DuplicateChecker类（重复检测）

- 检测并避免生成重复题目
- 基于表达式标准化和数学等价性判断

### 5. FileProcessor类（文件处理）

- 保存题目和答案到文件
- 批改答案并生成评分报告
- 支持表达式字符串的解析和计算

### 6. CommandLineParser类（命令行解析）

- 解析用户输入的命令行参数
- 提供友好的错误提示和使用说明

## 启动命令

### 题目生成模式

```
# 生成100道题目，数值范围在10以内
./program -n 100 -r 10

# 生成50道题目，数值范围在20以内
./program -n 50 -r 20
```

### 答案批改模式

```
# 批改练习题和答案
./program -e Exercises.txt -a Answers.txt
```

## 参数说明

| 参数 | 说明           | 取值范围     | 必需性       |
| :--- | :------------- | :----------- | :----------- |
| `-n` | 题目数量       | 1-10000      | 生成模式必需 |
| `-r` | 数值范围       | 正整数       | 生成模式必需 |
| `-e` | 练习题文件路径 | 有效文件路径 | 批改模式必需 |
| `-a` | 答案文件路径   | 有效文件路径 | 批改模式必需 |

## 输出文件

### 题目生成模式输出：

- `Exercises.txt`- 生成的题目文件
- `Answers.txt`- 对应的答案文件

### 答案批改模式输出：

- `Grade.txt`- 批改结果统计

## 题目要求规范

1. **数值范围**：题目中出现的数值在指定范围内
2. **减法结果**：减法运算结果必须为非负数
3. **除法结果**：除法运算结果必须为真分数
4. **题目唯一性**：生成的题目不能重复
5. **分数表示**：结果以最简分数形式表示，支持带分数

## 技术特性

- **面向对象设计**：采用类封装，代码结构清晰
- **异常处理**：完善的错误处理和用户提示
- **内存管理**：合理的资源分配和释放
- **算法优化**：高效的表达式树操作和查重算法

## 使用示例

### 生成题目示例：

```
$ ./program -n 5 -r 10
成功生成 5 道题目
题目已保存到 Exercises.txt
答案已保存到 Answers.txt
```

### 批改答案示例：

```
$ ./program -e Exercises.txt -a Answers.txt
批改结果已保存到 Grade.txt
```

## 注意事项

1. 确保有足够的磁盘空间存储生成的文件
2. 数值范围参数`-r`建议设置在合理的范围内（如5-100）
3. 题目数量较多时，生成可能需要一些时间
4. 批改模式需要确保题目文件和答案文件格式正确

## 开发环境

- 编译器：支持C++11标准的编译器（g++、clang等）
- 操作系统：Windows/Linux/macOS
- 构建工具：支持CMake或直接编译